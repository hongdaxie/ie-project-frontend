(window["webpackJsonpie-project"]=window["webpackJsonpie-project"]||[]).push([[21],{545:function(e,a,t){"use strict";t.r(a);t(150);var s=t(27),r=(t(215),t(151)),n=(t(85),t(32)),i=(t(219),t(156)),o=(t(152),t(11)),l=(t(218),t(79)),d=(t(216),t(118)),c=t(45),m=t(46),u=t(49),p=t(47),f=t(48),h=t(0),g=t.n(h),w=t(69),b=(t(153),t(86)),v=t(34),E=t(155),y=t(55),P=function(e){function a(){var e;return Object(c.a)(this,a),(e=Object(u.a)(this,Object(p.a)(a).call(this))).handleSubmit=function(a){a.preventDefault(),e.props.form.validateFieldsAndScroll(function(a,t){a||(console.log("Received values of form: ",t),e.props.register(t))})},e.handleConfirmBlur=function(a){var t=a.target.value;e.setState({confirmDirty:e.state.confirmDirty||!!t})},e.compareToFirstPassword=function(a,t,s){var r=e.props.form;t&&t!==r.getFieldValue("password")?s("Two passwords that you enter is inconsistent!"):s()},e.validateToNextPassword=function(a,t,s){var r=e.props.form;t&&e.state.confirmDirty&&r.validateFields(["confirm"],{force:!0}),s()},e.validatePreferName=function(e,a,t){/^[A-Za-z\s]+$/.test(a)?t():t("You should input legal name!")},e.validateNameLength=function(e,a,t){a.length>20?t("The length of the name should no more than 20."):t()},e.validatePassword=function(e,a,t){/^(?=.*\d)(?=.*[a-zA-Z])[0-9a-zA-Z]{8,20}$/.test(a)?t():t("The password length should between 8 to 20 and contains at least one number and one character(a-z or A-Z)")},e.state={confirmDirty:!1},e}return Object(f.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return this.props.isLogin?g.a.createElement(y.a,{to:"./Account"}):g.a.createElement(s.a,{lg:{span:12,offset:6},md:{span:22,offset:1},style:{marginTop:"24px",marginBottom:"24px"}},g.a.createElement(r.a,{style:{maxWidth:"500px",margin:"auto"}},g.a.createElement(l.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:this.handleSubmit}),g.a.createElement(l.a.Item,{label:"E-mail"},e("email",{rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]})(g.a.createElement(d.a,{disabled:this.props.isLoading}))),g.a.createElement(l.a.Item,{label:"Password",hasFeedback:!0},e("password",{rules:[{required:!0,message:"Please input your password!"},{validator:this.validatePassword},{validator:this.validateToNextPassword}]})(g.a.createElement(d.a.Password,{disabled:this.props.isLoading}))),g.a.createElement(l.a.Item,{label:"Confirm Password",hasFeedback:!0},e("confirm",{rules:[{required:!0,message:"Please confirm your password!"},{validator:this.compareToFirstPassword}]})(g.a.createElement(d.a.Password,{onBlur:this.handleConfirmBlur,disabled:this.props.isLoading}))),g.a.createElement(l.a.Item,{label:g.a.createElement("span",null,"Nickname\xa0",g.a.createElement(i.a,{title:"What do you want others to call you?"},g.a.createElement(o.a,{type:"question-circle-o"})))},e("nickname",{rules:[{required:!0,message:"Please input your nickname!",whitespace:!0},{validator:this.validatePreferName},{validator:this.validateNameLength}]})(g.a.createElement(d.a,{disabled:this.props.isLoading}))),g.a.createElement(l.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},g.a.createElement(n.a,{type:"primary",htmlType:"submit",loading:this.props.isLoading},"Register")))))}}]),a}(h.Component);a.default=Object(w.b)(function(e){return{isLogin:e.user.isLogin,isLoading:e.user.isLoading}},{register:function(e){return function(a){a({type:v.a.START_REGISTER});var t=JSON.stringify(e);Object(E.h)(t).then(function(e){e.data?(window.sessionStorage.setItem("user",JSON.stringify(e.data)),a(function(e){return b.a.success("Congratulation ".concat(e.nickname,"\uff01You have registered successfully")),{type:v.a.REGISTER_SUCCESS,payload:{userInfo:e}}}(e.data))):a((b.a.error("Oops! This email address has been already registered!",2),{type:v.a.REGISTER_FAILED}))})}}})(l.a.create({name:"register"})(P))}}]);
//# sourceMappingURL=21.df4c7385.chunk.js.map